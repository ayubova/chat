{"version":3,"sources":["utils.js","api.js","AppBar.jsx","context.js","LoginPasswordForm.jsx","Login.jsx","Chat.jsx","App.js","index.js"],"names":["formatDateTime","dateTime","moment","format","publishMessage","message","fetch","method","body","getAllMessages","then","res","json","messages","map","Object","objectSpread","time","reverse","formatMessages","login","password","headers","Accept","Content-Type","JSON","stringify","logout","AppBar","handleLogout","_this","props","history","push","_this$props","this","classes","location","react_default","a","createElement","className","root","AppBar_default","position","color","Toolbar_default","Typography_default","variant","grow","pathname","Button_default","loginButton","onClick","React","Component","withStyles","flexGrow","menuButton","marginLeft","marginRight","backgroundColor","withRouter","createContext","initialState","showPassword","error","LoginPasswordForm","state","handleChange","field","event","_this$setState","setState","defineProperty","target","value","handleClickShowPassword","handleKeyDown","e","key","_this$state","length","handleLogin","user","context","setUser","catch","prevProps","type","container","onKeyDown","noValidate","autoComplete","FormControl_default","input","InputLabel_default","htmlFor","Input_default","id","label","onChange","fullWidth","endAdornment","InputAdornment_default","IconButton_default","aria-label","Visibility_default","VisibilityOff_default","button","contextType","AuthContext","compose","display","width","margin","marginTop","Login","tabIndex","react","Tabs_default","indicatorColor","Tab_default","tab","src_LoginPasswordForm","height","minWidth","Chat","newMessage","handlePublish","preventDefault","_this2","subscribe","response","_ref","concat","toConsumableArray","setTimeout","TextField_default","multiline","rowsMax","textField","placeholder","InputProps","disabled","Send_default","List_default","_ref2","i","ListItem_default","alignItems","ListItemIcon_default","Face_default","ListItemText_default","secondary","component","messageTitle","theme","breakpoints","only","spacing","unit","padding","wordBreak","fontSize","withWidth","App","isAuth","undefined","renderChat","src_Chat","Redirect","to","BrowserRouter","Provider","src_AppBar","Route","path","exact","render","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.4d488c89.chunk.js","sourcesContent":["import moment from 'moment';\n\nexport const formatDateTime = dateTime => moment(dateTime).format('MMMM Do YYYY, h:mm:ss a');\n\nexport const formatMessages = messages =>\n  messages\n    .map(message => ({\n      ...message,\n      time: formatDateTime(message.time),\n    }))\n    .reverse();\n","import { formatMessages } from './utils';\n\n// apiEndpoints\nexport const GET_ALL_MESSAGES = '/messages';\nexport const PUBLISH_MESSAGE = '/publish';\nexport const LOGIN = '/login';\nexport const LOGOUT = '/logout';\n\n// requests\nexport const publishMessage = message => fetch(PUBLISH_MESSAGE, { method: 'POST', body: message });\n\nexport const getAllMessages = () =>\n  fetch('/messages')\n    .then(res => res.json())\n    .then(messages => formatMessages(messages));\n\nexport const login = (login, password) =>\n  fetch(LOGIN, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({ login, password }),\n  }).then(res => res.json());\n\nexport const logout = () => fetch(LOGOUT);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport AppBarMui from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport { withRouter } from 'react-router-dom';\n\nimport { logout } from './api';\n\nconst styles = {\n  root: {\n    flexGrow: 1,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20,\n  },\n  loginButton: {\n    backgroundColor: '#e0e0e0',\n  },\n};\n\nclass AppBar extends React.Component {\n  handleLogout = () => {\n    logout();\n    this.props.history.push('/login');\n  };\n\n  render() {\n    const { classes, location } = this.props;\n    return (\n      <div className={classes.root}>\n        <AppBarMui position=\"static\" color=\"default\">\n          <Toolbar>\n            <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\n              Chat\n            </Typography>\n            {location.pathname === '/' && (\n              <Button className={classes.loginButton} onClick={this.handleLogout}>\n                Logout\n              </Button>\n            )}\n          </Toolbar>\n        </AppBarMui>\n      </div>\n    );\n  }\n}\n\nAppBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(withRouter(AppBar));\n","import React from 'react';\n\nexport default React.createContext('auth');\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Visibility from '@material-ui/icons/Visibility';\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\nimport FormControl from '@material-ui/core/FormControl';\nimport { withRouter } from 'react-router-dom';\nimport compose from 'recompose/compose';\n\nimport AuthContext from './context';\nimport { login } from './api';\n\nconst styles = () => ({\n  input: {\n    display: 'block',\n  },\n  container: {\n    width: '250px',\n    margin: 'auto',\n  },\n  button: {\n    marginTop: '32px',\n    backgroundColor: '#f5f5f5',\n  },\n});\n\nconst initialState = { login: '', password: '', showPassword: false, error: false };\n\nclass LoginPasswordForm extends React.Component {\n  static contextType = AuthContext;\n  state = initialState;\n\n  handleChange = field => event => this.setState({ [field]: event.target.value, error: false });\n\n  handleClickShowPassword = () => this.setState({ showPassword: !this.state.showPassword });\n\n  handleKeyDown = e => {\n    if (e.key === 'Enter') {\n      const { error, login, password } = this.state;\n      if (!error && login.length > 0 && password.length > 0) {\n        this.handleLogin();\n      }\n    }\n  };\n\n  handleLogin = () => {\n    login(this.state.login, this.state.password)\n      .then(user => {\n        this.context.setUser(user);\n        this.props.history.push('/');\n      })\n      .catch(() => this.setState({ error: true }));\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.type !== this.props.type) {\n      this.setState(initialState);\n    }\n  }\n\n  render() {\n    const { classes, type } = this.props;\n\n    return (\n      <form\n        className={classes.container}\n        onKeyDown={this.handleKeyDown}\n        noValidate\n        autoComplete=\"off\"\n      >\n        <FormControl error={this.state.error} className={classes.input}>\n          <InputLabel htmlFor=\"adornment-login\">Login</InputLabel>\n          <Input\n            id=\"standard-multiline-flexible\"\n            label=\"Login\"\n            value={this.state.login}\n            onChange={this.handleChange('login')}\n            fullWidth\n          />\n        </FormControl>\n        <FormControl error={this.state.error} className={classes.input}>\n          <InputLabel htmlFor=\"adornment-password\">Password</InputLabel>\n          <Input\n            id=\"adornment-password\"\n            type={this.state.showPassword ? 'text' : 'password'}\n            value={this.state.password}\n            fullWidth\n            onChange={this.handleChange('password')}\n            endAdornment={\n              <InputAdornment position=\"end\">\n                <IconButton\n                  aria-label=\"Toggle password visibility\"\n                  onClick={this.handleClickShowPassword}\n                >\n                  {this.state.showPassword ? <Visibility /> : <VisibilityOff />}\n                </IconButton>\n              </InputAdornment>\n            }\n          />\n        </FormControl>\n        <Button variant=\"outlined\" fullWidth className={classes.button} onClick={this.handleLogin}>\n          {type === 'signIn' ? 'Login' : 'Create account'}\n        </Button>\n      </form>\n    );\n  }\n}\n\nLoginPasswordForm.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default compose(\n  withStyles(styles),\n  withRouter,\n)(LoginPasswordForm);\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nimport LoginPasswordForm from './LoginPasswordForm';\n\nconst styles = () => ({\n  container: {\n    width: '250px',\n    margin: 'auto',\n    height: '48px',\n    marginTop: '48px'\n  },\n  tab: {\n    width: '125px',\n    minWidth: '125px',\n  },\n});\n\n\nclass Login extends React.Component {\n  state = { tabIndex: 0 }\n\nhandleChange = (event, tabIndex) => this.setState({ tabIndex });\n\nrender() {\n  const { classes } = this.props;\n  const {tabIndex} = this.state;\n  return (\n    <Fragment>\n      <div position=\"static\" className={classes.container}>\n        <Tabs\n          value={this.state.tabIndex}\n          onChange={this.handleChange}\n          indicatorColor=\"primary\"\n          variant=\"fullWidth\"\n        >\n          <Tab className={classes.tab} label=\"Sign in\" />\n          <Tab className={classes.tab} label=\"Sign up\" />\n        </Tabs>\n      </div>\n      {tabIndex === 0 ? <LoginPasswordForm type=\"signIn\"/> :\n        <LoginPasswordForm type=\"signUp\"/>}\n    </Fragment>\n  );\n}\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Login);\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport withWidth from '@material-ui/core/withWidth';\nimport IconButton from '@material-ui/core/IconButton';\nimport TextField from '@material-ui/core/TextField';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport FaceIcon from '@material-ui/icons/Face';\nimport Typography from '@material-ui/core/Typography';\nimport SendIcon from '@material-ui/icons/Send';\nimport InputAdornment from '@material-ui/core/InputAdornment';\n\nimport AuthContext from './context';\n\nimport { publishMessage, getAllMessages } from './api';\nimport { formatDateTime } from './utils';\n\nconst styles = theme => ({\n  container: {\n    margin: 'auto',\n    display: 'flex',\n    alignItems: 'baseline',\n    width: 600,\n    [theme.breakpoints.only('xs')]: {\n      width: '100%',\n    },\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n    width: 600,\n    [theme.breakpoints.only('xs')]: {\n      width: '100%',\n    },\n  },\n  button: {\n    backgroundColor: '#e0e0e0',\n    padding: 4,\n  },\n  messages: {\n    margin: 'auto',\n    width: 600,\n    wordBreak: 'break-word',\n  },\n  messageTitle: {\n    display: 'block',\n    marginRight: 16,\n    fontSize: 12,\n  },\n});\n\nclass Chat extends React.Component {\n  static contextType = AuthContext;\n  state = { newMessage: '', messages: [] };\n\n  componentDidMount() {\n    getAllMessages().then(messages => this.setState({ messages }));\n    const subscribe = () => {\n      fetch('/subscribe')\n        .then(response => response.json())\n        .then(({ message, user, time }) => {\n          const newMessage = {\n            message,\n            user,\n            time: formatDateTime(time),\n          };\n          this.setState({\n            messages: [newMessage, ...this.state.messages],\n          });\n          subscribe();\n        })\n        .catch(() => setTimeout(subscribe, 500));\n    };\n    subscribe();\n  }\n\n  handleChange = event => this.setState({ newMessage: event.target.value });\n\n  handlePublish = () => {\n    publishMessage(this.state.newMessage);\n    this.setState({ newMessage: '' });\n  };\n\n  handleKeyDown = e => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      if (this.state.newMessage.length > 0) {\n        this.handlePublish();\n      }\n    }\n  };\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <Fragment>\n        <form\n          onKeyDown={this.handleKeyDown}\n          className={classes.container}\n          noValidate\n          autoComplete=\"off\"\n        >\n          <TextField\n            id=\"standard-multiline-flexible\"\n            multiline\n            rowsMax=\"4\"\n            value={this.state.newMessage}\n            onChange={this.handleChange}\n            className={classes.textField}\n            margin=\"normal\"\n            placeholder=\"Write a message ...\"\n            variant=\"outlined\"\n            InputProps={{\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton\n                    disabled={this.state.newMessage.length === 0}\n                    onClick={this.handlePublish}\n                  >\n                    <SendIcon />\n                  </IconButton>\n                </InputAdornment>\n              ),\n            }}\n          />\n        </form>\n        <div className={classes.messages}>\n          <List className={classes.root}>\n            {this.state.messages.map(({ message, user, time }, i) => (\n              <ListItem key={i} alignItems=\"flex-start\">\n                <ListItemIcon>\n                  <FaceIcon />\n                </ListItemIcon>\n                <ListItemText\n                  secondary={\n                    <Fragment>\n                      <Typography\n                        component=\"span\"\n                        className={classes.messageTitle}\n                        color=\"textPrimary\"\n                      >\n                        {`${user}, ${time}`}\n                      </Typography>\n                      {message}\n                    </Fragment>\n                  }\n                />\n              </ListItem>\n            ))}\n          </List>\n        </div>\n      </Fragment>\n    );\n  }\n}\n\nChat.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(withWidth()(Chat));\n","import React, { Component, Fragment } from 'react';\nimport { BrowserRouter, Route, Redirect } from 'react-router-dom';\n\nimport AppBar from './AppBar';\nimport Login from './Login';\nimport Chat from './Chat';\nimport AuthContext from './context';\n\nclass App extends Component {\n  state = {\n    isAuth: undefined,\n    user: {},\n  };\n\n  setUser = user => this.setState({ user, isAuth: true });\n\n  componentDidMount() {\n    fetch('/user')\n      .then(res => res.json())\n      .then(user => this.setState({ isAuth: true, user }))\n      .catch(() => this.setState({ isAuth: false }));\n  }\n\n  renderChat = () => (this.state.isAuth ? <Chat /> : <Redirect to=\"/login\" />);\n\n  render() {\n    return (\n      <BrowserRouter>\n        {this.state.isAuth !== undefined && (\n          <AuthContext.Provider\n            value={{ isAuth: this.state.isAuth, user: this.state.user, setUser: this.setUser }}\n          >\n            <Fragment>\n              <AppBar />\n              <Route path=\"/\" exact render={this.renderChat} />\n              <Route path=\"/login\" component={Login} />\n            </Fragment>\n          </AuthContext.Provider>\n        )}\n      </BrowserRouter>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}